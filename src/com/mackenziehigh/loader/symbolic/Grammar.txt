


root = include
     / exchange
     / module
     ;

include = [ "include" , $ATOM ];

exchange = direct_exchange
         / spawn_exchange
         / worker_exchange

         ;

direct_exchange = [ "direct" , "exchange" , direct_option * ];

    direct_option = exchange_keys;

spawn_exchange = [ "spawn" , "exchange" , spawn_option * ];

    spawn_option = spawn_thread_max_count
                 / spawn_thread_name
                 / exchange_keys
                 ;

    spawn_thread_max_count = [ "thread" , "max" , $INT ];

    spawn_thread_name = [ "thread" , "name" , $ATOM ];

worker_exchange = [ "worker" , "exchange" , worker_option * ];

    worker_option = worker_thread_count
                  / worker_thread_name
                  / worker_queue_size
                  / exchange_keys
                  ;

    worker_thread_count = [ "thread" , "count" , $INT ];

    worker_thread_name = [ "thread" , "name" , $ATOM ];

    worker_queue_size = [ "queue" , "size" , $INT ];

exchange_keys = [ "keys" , key * ];

    key = $ATOM;

module = predefined_module / plugin_module;

predefined_module = $ANY;

plugin_module = $ANY;





